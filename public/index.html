<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/img/bite_logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#800000" />
    <meta
      name="description"
      content="BiteAlert - Animal Bite Management System"
    />
    <meta name="keywords" content="Animal Bite, Rabies, Vaccination, Health Center, San Juan" />
    <meta name="robots" content="index,follow" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=(), ambient-light-sensor=(), autoplay=(), encrypted-media=(), fullscreen=(self), picture-in-picture=()" />
    <meta http-equiv="Content-Security-Policy" content="default-src *; script-src * 'unsafe-inline' 'unsafe-eval'; style-src * 'unsafe-inline'; font-src *; img-src * data:; connect-src *; base-uri *; form-action *; object-src *;" />
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload" />
    <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp" />
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin" />
    <meta http-equiv="Cross-Origin-Resource-Policy" content="same-origin" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/img/bite_logo.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <!-- Performance: Preconnect to most critical origins only (max 4) -->
    <link rel="preconnect" href="https://bitealert-backend-tfj9.onrender.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    
    <!-- DNS prefetch for additional performance -->
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    
    <!-- Preload critical resources -->
    <!-- Removed CSS preloads for hashed filenames to avoid 404s -->
    <link href="/img/SANJUAN.jpg" rel="preload" as="image" type="image/jpeg" fetchpriority="high">

    <!-- Critical CSS - Inline for immediate rendering -->
    <style>
      /* Critical styles for initial render */
      body { 
        margin: 0; 
        font-family: 'Poppins', sans-serif; 
        background: #fdf2dc; 
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      #root { min-height: 100vh; }
      .loading-spinner { display: flex; justify-content: center; align-items: center; height: 100vh; }
      .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #800000; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      
      /* Prevent layout shifts during CSS loading */
      .App {
        min-height: 100vh;
        opacity: 0;
        animation: fadeIn 0.3s ease-in-out forwards;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      /* Ensure consistent layout structure */
      .dashboard-container {
        display: flex;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        position: relative;
      }
      
      .main-content {
        padding: 1rem 1.5rem;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        min-height: 100vh;
        max-width: 100%;
        overflow-y: auto;
        overflow-x: hidden;
        position: fixed;
        top: 0;
        left: 320px;
        width: calc(100% - 320px);
        height: 100vh;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
        z-index: 1;
        box-sizing: border-box;
        transition: left 0.3s ease, width 0.3s ease;
        margin: 0;
        border: none;
        transform: translateZ(0);
        will-change: transform;
        backface-visibility: hidden;
      }
      
      /* Responsive adjustments */
      @media (max-width: 768px) {
        .main-content {
          left: 0;
          width: 100%;
        }
      }
    </style>
    
    <!-- Non-critical CSS - Load asynchronously with font-display: swap -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"></noscript>
    
    <!-- Font Awesome font-display optimization -->
    <style>
      @font-face {
        font-family: 'Font Awesome 6 Free';
        font-display: swap;
        src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/webfonts/fa-solid-900.woff2') format('woff2');
      }
    </style>
    
    <!-- Google Fonts - Optimized loading with font-display: swap -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"></noscript>
    
    <!-- Font display optimization -->
    <style>
      @font-face {
        font-family: 'Poppins';
        font-display: swap;
        src: local('Poppins');
      }
      @font-face {
        font-family: 'Clash Grotesk';
        font-display: swap;
        src: local('Clash Grotesk');
      }
    </style>
    
    <!-- Clash Grotesk Font - Deferred -->
    <link rel="preload" href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@400,500,600,700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@400,500,600,700&display=swap"></noscript>
    
    <!-- Bootstrap - Deferred -->
    <link rel="preload" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"></noscript>
    
    <!-- TailwindCSS - Removed CDN for production -->
    <!-- Note: TailwindCSS should be installed as a PostCSS plugin for production -->
    
    <!-- jsPDF Libraries - Deferred loading -->
    <script>
      // Load PDF libraries only when needed
      window.loadPDFLibraries = function() {
        return new Promise((resolve) => {
          if (window.jspdf) {
            resolve();
            return;
          }
          
          const script1 = document.createElement('script');
          script1.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
          script1.onload = () => {
            const script2 = document.createElement('script');
            script2.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js';
            script2.onload = resolve;
            document.head.appendChild(script2);
          };
          document.head.appendChild(script1);
        });
      };
    </script>
    
    <title>Bite Alert üêæ</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('SW registered: ', registration);
            })
            .catch((registrationError) => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
  </body>
</html> 